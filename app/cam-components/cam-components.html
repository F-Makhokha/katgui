<div flex layout="column" ng-controller="CamComponentsCtrl as vm" style="margin-left: 16px; margin-right: 16px; margin-bottom: 16px; min-width: 1065px">
    <div class="cam-build-info" layout-align="center center" layout="column">
        <div flex style="padding: 16px;" class="md-whiteframe-z5" layout="column">
            <span flex style="text-align: center; font-size: 16px; cursor: pointer;" ng-click="vm.showDetailedCamBuildInfo = !vm.showDetailedCamBuildInfo"
                  ng-init="vm.showDetailedCamBuildInfo = false">
                Current Build: <b>{{::vm.systemConfig.version.description}}</b>
            </span>
            <div ng-show="vm.showDetailedCamBuildInfo" layout="column" class="grow-height-animation"
                 style="margin-top: 8px;">
                <div layout="row" ng-repeat="(key, value) in vm.systemConfig.version">
                    <span style="width: 140px;">{{::key}}:</span>
                    <span style="margin-left: 8px;">{{::value}}</span>
                </div>
            </div>
        </div>
    </div>
    <md-toolbar class="md-whiteframe-z1 md-toolbar-tools" layout="row" layout-align="start center">
        <span flex style="margin-top: -5px;">CAM Components - Versions and Build State</span>
        <md-button ng-click="vm.collapseAll()" title="Collapse All" class="inline-action-button no-margin-no-padding" style="font-size: 16px;">
            <i class="fa fa-minus-square-o"></i>
        </md-button>
        <md-button ng-click="vm.expandAll()" title="Expand All" class="inline-action-button no-margin-no-padding" style="font-size: 16px;">
            <i class="fa fa-plus-square-o"></i>
        </md-button>
        <div flex class="unselectable list-subheader-title" layout="row" layout-align="center center"
            style="position: absolute; left: 0; bottom: 0; padding-left: 6px;">
            <span style="width: 160px;" class="subheader-text">
                Component
            </span>
            <span style="width: 110px; margin-left: 16px;" class="subheader-text">
                IP:Port
            </span>
            <span style="width: 180px; margin-left: 16px;" class="subheader-text">
                Version
            </span>
            <span flex style="margin-left: 16px;" class="subheader-text">
                Build State
            </span>
            <span style="margin-right: 6px;" class="subheader-text">
                Actions
            </span>
        </div>
    </md-toolbar>

    <div class="md-whiteframe-z1" md-theme="{{themePrimaryButtons}}">
        <div ng-repeat="key in objectKeys(vm.resourcesNames) | orderBy:key track by key"
             class="process-control-container">
            <div flex ng-click="vm.resourcesNames[key].showDetails = !vm.resourcesNames[key].showDetails" role="heading"
                 ng-init="vm.resourcesNames[key].showDetails = false" class="process-control-bg-transition md-whiteframe-z1"
                 style="padding: 6px;" layout="row" layout-align="start center" ng-class="{'bg-light-grey-0-3': vm.resourcesNames[key].showDetails}">
                <span ng-show="!vm.resourcesNames[key].connected" class="red-color" style="width: 160px; margin: 0;"><b>{{::key | uppercase}}</b></span>
                <span ng-show="vm.resourcesNames[key].connected" class="green-color" style="width: 160px; margin: 0;"><b>{{::key | uppercase}}</b></span>
                <span>{{::vm.resourcesNames[key].address[0]}}</span>
                <span style="width: 38px; margin: 0">:{{::vm.resourcesNames[key].address[1]}}</span>
                <span style="width: 180px;"><i>{{::vm.resourcesNames[key].sensors.api_version.value}}</i></span>
                <span flex><i>{{::vm.resourcesNames[key].sensors.build_state.value}}</i></span>
                <div layout="row" style="position: absolute; right: 0; top: 0">

            		    <md-switch ng-if="vm.resourcesNames[key].sensors.logging_katcpmsgs_proxy_enabled" ng-click="$event.stopPropagation()"
                        ng-change="vm.toggleKATCPMessageProxy(key, vm.resourcesNames[key].sensors.logging_katcpmsgs_proxy_enabled.value);"
                        ng-model="vm.resourcesNames[key].sensors.logging_katcpmsgs_proxy_enabled.value" style="margin: 0">
                                    p
            		    </md-switch>
            		    <md-switch ng-if="vm.resourcesNames[key].sensors.logging_katcpmsgs_devices_enabled" ng-click="$event.stopPropagation()"
                        ng-change="vm.toggleKATCPMessageDevices(key, vm.resourcesNames[key].sensors.logging_katcpmsgs_devices_enabled.value)"
                        ng-model="vm.resourcesNames[key].sensors.logging_katcpmsgs_devices_enabled.value" style="margin: 0">
                                    d
            		    </md-switch>
                    <md-button  ng-if="vm.resourcesNames[key].sensors.logging_katcpmsgs_devices_enabled || vm.resourcesNames[key].sensors.logging_katcpmsgs_proxy_enabled" 
		    ng-show="vm.resourcesNames[key].connected" ng-click="vm.openKatsnifferLogger('katcpmsgs.log'); $event.stopPropagation()" title="View Logs">
                        <i class="fa fa-info"></i>
                    </md-button>
                    <md-button ng-show="!vm.resourcesNames[key].connected" ng-click="vm.processCommand(key, 'start'); $event.stopPropagation()" title="Start Process">
                        <i class="fa fa-play"></i>
                    </md-button>
                    <md-button ng-show="vm.resourcesNames[key].connected" ng-click="vm.processCommand(key, 'restart_process'); $event.stopPropagation()" title="Restart Process">
                        <i class="fa fa-refresh"></i>
                    </md-button>
                    <md-button ng-show="vm.resourcesNames[key].connected" ng-click="vm.processCommand(key, 'kill'); $event.stopPropagation()" title="Kill Process">
                        <i class="fa fa-remove"></i>
                    </md-button>
                    <md-button ng-show="vm.resourcesNames[key].connected" ng-click="vm.processCommand(key, 'stop'); $event.stopPropagation()" title="Stop Process">
                        <i class="fa fa-stop"></i>
                    </md-button>
                </div>

            </div>
            <div ng-if="vm.resourcesNames[key].showDetails" class="grow-height-animation" style="cursor: auto;">
                <div ng-repeat="(key, sensor) in vm.resourcesNames[key].sensors | orderBy:'name' track by key"
                     style="margin: 4px;">
                    <div style="text-align: end; width: 230px; display: inline-block"><span>{{sensor.name}}:</span></div>
                    <div style="display: inline-block; margin-left: 4px;"><span><b>{{sensor.value}}</b></span></div>
                </div>
            </div>
        </div>
    </div>
</div>
