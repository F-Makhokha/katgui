<div flex style="padding: 8px; min-width: 1200px" ng-controller="UserlogCtrl as vm" layout="column">
    <md-toolbar layout="row" class="md-whiteframe-z1" style="height: 80px">
        <!-- <input class="search-input-box" type="search"
               ng-model-options="{ debounce: 300 }" ng-model="vm.q" placeholder="Search Userlogs..."/> -->
        <md-chips ng-model="vm.filterTags" style="margin-bottom: 24px; padding: 0 8px" md-autocomplete-snap md-require-match="true" flex
            md-on-add="vm.tagFilterChanged()"
            md-on-remove="vm.tagFilterChanged()">
            <md-autocomplete
                md-search-text="searchText"
                md-items="item in vm.querySearch(searchText)"
                md-item-text="item.name"
                placeholder="Select tags to filter by">
                <md-item-template>
                    <span md-highlight-text="searchText" title="{{item.slug}}">{{item.name}}</span>
                </md-item-template>
                <md-not-found>
                    No matches found
                </md-not-found>
            </md-autocomplete>
            <md-chip-template>
                <span style="overflow: auto; width: 100%;">
                    <strong>{{$chip.name}}</strong>
                </span>
            </md-chip-template>
            <md-button class="md-fab" aria-label="Remove Tag">
                <md-icon md-chip-remove md-font-icon="fa-close" style="color:white; fill:white;"></md-icon>
            </md-button>
        </md-chips>
        <md-input-container md-theme="{{$root.themePrimaryButtons}}" md-no-float class="md-primary" title="Selected Time" style="font-size: 12px; width: 125px; padding-right: 8px;">
            <input ng-disabled="vm.chatMode" style="color: white" flex placeholder="Selected Time" ng-model="vm.newLogStartTimeText" ng-model-options="{ debounce: 300 }">
        </md-input-container>
        <md-button ng-click="vm.newLogStartTimeText = $root.utcDateTime"
            style="height: 36px; max-width: 42px; min-width: 42px; margin-top: 16px; margin-left: 0; padding: 0;">
            Now
        </md-button>
        <div class="unselectable list-subheader-title" layout="row" layout-align="start center"
             style="position: absolute; left: 8px; bottom: 0; right: 0;">
            <span class="subheader-text" style="width: 125px">
                <span>Start Time (UTC)</span>
            </span>
            <span class="subheader-text" style="width: 125px">
                <span>End Time (UTC)</span>
            </span>
            <span flex class="subheader-text">
                <span>Content</span>
            </span>
            <span class="subheader-text" style="margin-right: 58px">
                Tags
            </span>
        </div>
    </md-toolbar>
    <div flex class="md-whiteframe-z1" style="overflow: auto">
        <div ng-repeat="userLog in vm.userLogs | filter:vm.filterAfterNow | filter:vm.filterByTag | orderBy:'start_time':true"
            flex layout="row" layout-align="start center" class="user-log-row">
            <span style="width: 125px; font-size: 12px">
                {{userLog.start_time | date:'yyyy-MM-dd HH:mm:ss'}}
            </span>
            <span style="width: 125px; font-size: 12px">
                {{userLog.end_time | date:'yyyy-MM-dd HH:mm:ss'}}
            </span>
            <span flex>{{userLog.userlog_content}}</span>
            <i style="font-size: 12px" ng-repeat="tag in userLog.tags" ng-style="{'deactivated-tag': !tag.activated}">{{tag.name}}{{$last? '' : ','}}</i>
            <span class="md-caption" ng-show="userLog.attachment_count>0">
                {{userLog.attachment_count}}
                <md-icon class="fa" md-font-icon="fa-paperclip"></md-icon>
            </span>
            <md-button title="Edit User Log" class="inline-action-button" style="margin: 0"
                       ng-click="vm.editUserLog(userLog, $event)">
                <span style="display: inherit" class="fa fa-edit"></span>
            </md-button>
        </div>
        <form ng-submit="vm.addNewInlineLog()" md-theme="{{$root.themePrimaryButtons}}" layout="row" layout-align="start center" class="userlog-new-log-row">
            <md-input-container md-no-float class="md-primary" title="Start Time" style="font-size: 12px; width: 125px">
                <input ng-disabled="vm.chatMode" flex placeholder="Start Time" ng-model="vm.newLogStartTimeText" ng-model-options="{ debounce: 300 }">
            </md-input-container>
            <md-input-container md-no-float class="md-primary" title="End Time" style="font-size: 12px; width: 125px">
                <input flex placeholder="End Time" ng-model="vm.newLogEndTime" ng-model-options="{ debounce: 300 }">
            </md-input-container>
            <md-input-container flex md-no-float class="md-primary" title="Content">
                <input focus flex placeholder="Content" ng-model="vm.newLogContent" ng-model-options="{ debounce: 300 }">
            </md-input-container>
            <md-button ng-show="false" type="submit" style="margin: 8px;" class="">+</md-button>
        </form>
        <div ng-repeat="userLog in vm.userLogs | filter:vm.filterBeforeNow | filter:vm.filterByTag | orderBy:'start_time':true"
            flex layout="row" layout-align="start center" class="user-log-row">
            <span style="width: 125px; font-size: 12px">
                {{userLog.start_time | date:'yyyy-MM-dd HH:mm:ss'}}
            </span>
            <span style="width: 125px; font-size: 12px">
                {{userLog.end_time | date:'yyyy-MM-dd HH:mm:ss'}}
            </span>
            <span flex>{{userLog.userlog_content}}</span>
            <i style="font-size: 12px" ng-repeat="tag in userLog.tags" ng-style="{'deactivated-tag': !tag.activated}">{{tag.name}}{{$last? '' : ','}}</i>
            <span class="md-caption" ng-show="userLog.attachment_count>0">
                {{userLog.attachment_count}}
                <md-icon class="fa" md-font-icon="fa-paperclip"></md-icon>
            </span>
            <md-button title="Edit User Log" class="inline-action-button" style="margin: 0"
                       ng-click="vm.editUserLog(userLog, $event)">
                <span style="display: inherit" class="fa fa-edit"></span>
            </md-button>
        </div>
    </div>
</div>
